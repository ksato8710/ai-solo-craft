# AI Solo Builder 継続チェックリスト

このドキュメントは、AI Solo Builder の品質を維持するためのチェック項目と、それぞれをカバーする仕組みを定義する。

---

## 凡例：実行タイミング

| 記号 | 仕組み | 説明 |
|------|--------|------|
| 🔧 | pre-commit | `git commit` 時に自動実行 |
| 🚀 | pre-push | `git push` 時に自動実行 |
| 🤖 | GitHub Actions | PR/push時にCI実行 |
| ⏰ | cron | Clawdbot cronで定期実行 |
| 👀 | 手動 | 人間またはエージェントが目視確認 |

---

## 🔴 公開前チェック（毎回必須）

### Frontmatter整合性

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| `contentType` が `news \| product \| digest` のいずれか | ✅ | ✅ | ✅ | | |
| Digestには `digestEdition: morning \| evening` あり | ✅ | ✅ | ✅ | | |
| `relatedProducts` は配列形式 `["slug"]` | ✅ | ✅ | ✅ | | |
| `tags` は配列形式 | ✅ | ✅ | ✅ | | |
| `readTime` が数値で設定済み（productsは移行中許容） | ✅ | ✅ | ✅ | | |
| `slug` が他ファイルと重複していない | ✅ | ✅ | ✅ | | |
| YAML構文が正しい（パースエラーなし） | ✅ | ✅ | ✅ | | |

### Digest必須構造

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| `## 🏁 重要ニュースランキング（NVA）` セクションあり | ✅ | ✅ | ✅ | | |
| Top10ランキング表あり | ✅ | ✅ | ✅ | | |
| `## 🔥 Top 3 ピックアップ` セクションあり | ✅ | ✅ | ✅ | | |
| Top3の個別記事が存在する | | | | | ✅ |
| **Top10記事が適切な期間内**（朝刊: 前夕刊〜今朝刊、夕刊: 前朝刊〜今夕刊） | | | | | ✅ |

### リンク整合性

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| `relatedProducts` のslugが `/products/[slug]` に存在 | ✅ | ✅ | ✅ | | |
| 本文中の `/products/[slug]` リンクが404にならない | | ✅ | ✅ | | |
| 外部URLが有効（一次ソース確認） | | | | ⏰週次 | ✅ |

### ゲート通過

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| `npm run validate:content` 成功 | ✅ | ✅ | ✅ | | |
| `npm run sync:content:db` 成功 | | ✅ | ✅ | | |
| `npm run build` 成功 | | ✅ | ✅ | | |

---

## 🟠 ビジュアル・UI チェック

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| **ホーム画面の全記事にサムネイル画像が設定されている** | | | | ⏰日次 | ✅ |
| **ホーム画面の記事画像に重複がない** | | | | ⏰日次 | ✅ |
| OGP画像（1200×630）が正しく生成されている | | | | | ✅ |
| 記事ページのレイアウト崩れなし | | | | | ✅ |

---

## 🟡 日次チェック

### 朝刊（08:00公開目標）

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 07:30までに作成開始 | | | | ⏰07:30 | |
| NVA評価でTop10選定済み | | | | | ✅ |
| Top3の個別記事作成済み | | | | | ✅ |
| Slack #tifa にスレッド形式で報告 | | | | ⏰完了時 | |

### 夕刊（18:00公開目標）

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 17:30までに作成開始 | | | | ⏰17:30 | |
| 朝刊との重複を避けたTop10選定 | | | | | ✅ |
| Top3の個別記事作成済み | | | | | ✅ |

### 平日編集枠（12:30）

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 曜日別カテゴリ補完（月木: dev-knowledge、火金: case-study、水: product） | | | | ⏰12:30 | |

### デプロイ後確認

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 本番サイトでページが正常表示 | | | | ⏰デプロイ後 | ✅ |
| API `/api/v1/feed` が最新記事を返す | | | | ⏰デプロイ後 | |

---

## 🟢 週次チェック

### コンテンツバランス

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| news / digest / product の配分が適切 | | | | ⏰週次 | ✅ |
| tags分布の偏りなし | | | | ⏰週次 | |
| プロダクト辞書の更新漏れなし | | | | ⏰週次 | ✅ |

### DB整合性

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| Markdown ↔ DB のレコード数一致 | | | | ⏰週次 | |
| orphan（孤立）レコードなし | | | | ⏰週次 | |
| digest_details の edition/date 重複なし | | | | ⏰週次 | |

### パフォーマンス

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| ビルド時間が2分以内 | | | ✅ | | |
| Vercelデプロイエラーなし | | | ✅ | | |

### 外部リンク

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 壊れた外部リンクの検出・修正 | | | | ⏰週次 | |

---

## 🔵 月次チェック

### ポリシー準拠

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| `specs/content-policy/spec.md` との乖離なし | | | | ⏰月次 | ✅ |
| legacy形式（`category`, `relatedProduct`）の残存なし | | | | ⏰月次 | |

### コンテンツ棚卸し

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| 古い記事の更新要否判断 | | | | | ✅ |
| 参照されていないプロダクトページの整理 | | | | ⏰月次 | |

### 運用改善

| チェック項目 | 🔧 | 🚀 | 🤖 | ⏰ | 👀 |
|--------------|:--:|:--:|:--:|:--:|:--:|
| よくあるエラーパターンの自動化検討 | | | | | ✅ |
| このチェックリスト自体の更新 | | | | | ✅ |

---

## 実装状況

### 🔧 pre-commit

**ファイル:** `.husky/pre-commit`（未実装）

```bash
#!/bin/sh
npm run validate:content
```

### 🚀 pre-push

**ファイル:** `.husky/pre-push`（未実装）

```bash
#!/bin/sh
npm run publish:gate
```

### 🤖 GitHub Actions

**ファイル:** `.github/workflows/ci.yml`（未実装）

```yaml
name: CI
on: [push, pull_request]
jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npm run validate:content
      - run: npm run build
```

### ⏰ Clawdbot cron

**現在のcron:**
- 07:30 朝刊準備開始
- 12:30 平日編集枠
- 17:30 夕刊準備開始

**追加検討:**
- 日次: ホーム画面サムネイル/重複チェック
- 週次: DB整合性チェック、外部リンクチェック
- 月次: ポリシー準拠監査

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-12 | 初版作成（canonical移行後） |
